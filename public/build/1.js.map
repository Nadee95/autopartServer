{"version":3,"sources":["../../src/pages/add-parts-to-business/add-parts-to-business.module.ts","../../node_modules/rxjs/add/operator/map.js","../../src/pages/add-parts-to-business/add-parts-to-business.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddPartsToBusinessPage } from './add-parts-to-business';\n\n@NgModule({\n  declarations: [\n    AddPartsToBusinessPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddPartsToBusinessPage),\n  ],\n})\nexport class AddPartsToBusinessPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-parts-to-business/add-parts-to-business.module.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/map.js\n// module id = 299\n// module chunks = 0 1","import { Component } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, FormControl, FormArray } from '@angular/forms';\nimport { NavController, ModalController, IonicPage } from 'ionic-angular';\nimport { FilterPipe } from './../../filter.pipe';\nimport { VehicleBrandsPage } from './../vehicle-brands/vehicle-brands'\nimport { VehiclePartsSelectPage } from './../vehicle-parts-select/vehicle-parts-select'\nimport { DataServiceProvider } from '../../providers/data-service/data-service';\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\n/**\n * Generated class for the AddPartsToBusinessPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-add-parts-to-business',\n  templateUrl: 'add-parts-to-business.html',\n})\nexport class AddPartsToBusinessPage {\n\n  Business: {\n    _id: String,\n    bName: String,\n    owner: String,\n    address?: String\n  } = null;\n  myForm: FormGroup;\n  parts: FormArray;\n  results: Object;\n  searchTerm$ = new Subject<string>();\n  constructor(public navCtrl: NavController, private fb: FormBuilder, public modalCtrl: ModalController, public dataService: DataServiceProvider) {\n\n\n\n    this.myForm = fb.group({\n      vehicleType: ['', Validators.required],\n      vehicleBrand: this.fb.group({\n        name: ['', Validators.required],\n        code: ['', Validators.required]\n      }),\n      condition: ['', Validators.required],\n      vehicleCat: this.fb.group({\n        name: ['', Validators.required],\n        code: ['', Validators.required]\n      }),\n      parts: this.fb.array([])\n    });\n    this.myForm.get('vehicleType').valueChanges.subscribe(val => {\n      this.myForm.controls['vehicleBrand'].reset();\n    });\n\n    this.dataService.search(this.searchTerm$)\n      .subscribe(results => {\n        this.results = results;\n      });\n  }\n\n  selectBusiness(result){\n    this.Business=result;\n    this.results=null\n  }\n  \n  createPart(code): FormGroup {\n    return this.fb.group({\n      'name': [code.name, Validators.required],\n      'code': [code.code, Validators.required]\n    });\n  }\n  addPart(code) {\n    this.parts = this.myForm.get('parts') as FormArray;\n    this.parts.push(this.createPart(code));\n  }\n  setType(vehicle) {\n    this.myForm.controls['vehicleType'].setValue(vehicle)\n  }\n  setCond(cond) {\n    this.myForm.controls['condition'].setValue(cond)\n  }\n\n  selVehicleType(vehicleType: string) {\n    let vehicleModal = this.modalCtrl.create('VehicleBrandsPage', { vType: vehicleType });\n    vehicleModal.onDidDismiss(data => {\n      if (data) {\n        this.myForm['controls'].vehicleBrand['controls'].name.setValue(data.name);\n        this.myForm['controls'].vehicleBrand['controls'].code.setValue(data.code);\n      }\n    });\n    vehicleModal.present();\n  }\n\n  selPartType() {\n    let partModal = this.modalCtrl.create('VehiclePartsSelectPage');\n    partModal.onDidDismiss(data => {\n      if (data) {\n        this.addPart(data);\n      }\n    });\n    partModal.present();\n  }\n\n  selVehicleCat() {\n    let partModal = this.modalCtrl.create('VehicleTypePage');\n    partModal.onDidDismiss(data => {\n      if (data) {\n        this.myForm['controls'].vehicleCat['controls'].name.setValue(data.name);\n        this.myForm['controls'].vehicleCat['controls'].code.setValue(data.code);\n      }\n    });\n    partModal.present();\n  }\n\n  generateCodes() {\n    let pre = this.myForm.controls['vehicleType'].value + this.myForm['controls'].vehicleBrand['controls'].code.value + this.myForm.controls['condition'].value + this.myForm['controls'].vehicleCat['controls'].code.value;\n    let codes = [];\n    let parts = this.myForm.get('parts') as FormArray;\n    for (let i = 0; i < parts.length; i++) {\n      codes.push(pre + parts.at(i)['controls'].code.value);\n    }\n    this.dataService.addPartsToBusiness(this.Business._id, codes).subscribe(data => {\n      let d:any=data;\n      console.log(d);\n      if(d.status==200){\n        this.myForm.reset();\n      }\n    });\n  }\n\n  addDealer() {\n    this.navCtrl.push('AddBusinessPage');\n  }\n  selDistrict() {\n    let districtModal = this.modalCtrl.create('SelectDistrictPage');\n    districtModal.onDidDismiss(data => {\n      if (data) {\n        this.myForm.controls['district'].setValue(data);\n      }\n    });\n    districtModal.present();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-parts-to-business/add-parts-to-business.ts"],"sourceRoot":""}